{"ast":null,"code":"import _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/craigcronin/Development/applestooapples_web_template/src/views/calendar/CalendarView/index.js\";\n\nimport '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/list/main.css';\nimport React, { useState, useRef, useEffect } from 'react';\nimport moment from 'moment';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport { Container, Dialog, Paper, useTheme, useMediaQuery, makeStyles } from '@material-ui/core';\nimport Page from 'src/components/Page';\nimport { useDispatch, useSelector } from 'src/store';\nimport { getEvents, updateEvent, selectEvent, selectRange, openModal, closeModal } from 'src/slices/calendar';\nimport Header from './Header';\nimport Toolbar from './Toolbar';\nimport AddEditEventForm from './AddEditEventForm';\n\nvar selectedEventSelector = function selectedEventSelector(state) {\n  var _state$calendar = state.calendar,\n      events = _state$calendar.events,\n      selectedEventId = _state$calendar.selectedEventId;\n\n  if (selectedEventId) {\n    return events.find(function (_event) {\n      return _event.id === selectedEventId;\n    });\n  } else {\n    return null;\n  }\n};\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {\n      backgroundColor: theme.palette.background.dark,\n      minHeight: '100%',\n      paddingTop: theme.spacing(3),\n      paddingBottom: theme.spacing(3)\n    },\n    calendar: {\n      marginTop: theme.spacing(3),\n      padding: theme.spacing(2),\n      '& .fc-unthemed .fc-head': {\n        backgroundColor: theme.palette.background.dark\n      },\n      '& .fc-unthemed .fc-body': {\n        backgroundColor: theme.palette.background.default\n      },\n      '& .fc-unthemed .fc-row': {\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed .fc-axis': _objectSpread({}, theme.typography.body2),\n      '& .fc-unthemed .fc-divider': {\n        backgroundColor: theme.palette.background.dark,\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed th': {\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed td': {\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed td.fc-today': {\n        backgroundColor: theme.palette.background.dark\n      },\n      '& .fc-unthemed .fc-highlight': {\n        backgroundColor: theme.palette.background.dark\n      },\n      '& .fc-unthemed .fc-event': {\n        backgroundColor: theme.palette.secondary.main,\n        color: theme.palette.secondary.contrastText,\n        borderWidth: 2,\n        opacity: 0.9,\n        '& .fc-time': _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n          color: 'inherit'\n        }),\n        '& .fc-title': _objectSpread(_objectSpread({}, theme.typography.body1), {}, {\n          color: 'inherit'\n        })\n      },\n      '& .fc-unthemed .fc-day-top': _objectSpread({}, theme.typography.body2),\n      '& .fc-unthemed .fc-day-header': _objectSpread(_objectSpread({}, theme.typography.subtitle2), {}, {\n        fontWeight: theme.typography.fontWeightMedium,\n        color: theme.palette.text.secondary,\n        padding: theme.spacing(1),\n        backgroundColor: theme.palette.background.dark\n      }),\n      '& .fc-unthemed .fc-list-view': {\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed .fc-list-empty': _objectSpread({}, theme.typography.subtitle1),\n      '& .fc-unthemed .fc-list-heading td': {\n        backgroundColor: theme.palette.background.dark,\n        borderColor: theme.palette.divider\n      },\n      '& .fc-unthemed .fc-list-heading-main': _objectSpread({}, theme.typography.h6),\n      '& .fc-unthemed .fc-list-heading-alt': _objectSpread({}, theme.typography.h6),\n      '& .fc-unthemed .fc-list-item:hover td': {\n        backgroundColor: theme.palette.background.dark\n      },\n      '& .fc-unthemed .fc-list-item-title': _objectSpread({}, theme.typography.body1),\n      '& .fc-unthemed .fc-list-item-time': _objectSpread({}, theme.typography.body2)\n    }\n  };\n});\n\nvar CalendarView = function CalendarView() {\n  var classes = useStyles();\n  var calendarRef = useRef(null);\n  var theme = useTheme();\n  var mobileDevice = useMediaQuery(theme.breakpoints.down('sm'));\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.calendar;\n  }),\n      events = _useSelector.events,\n      isModalOpen = _useSelector.isModalOpen,\n      selectedRange = _useSelector.selectedRange;\n\n  var selectedEvent = useSelector(selectedEventSelector);\n\n  var _useState = useState(moment().toDate()),\n      _useState2 = _slicedToArray(_useState, 2),\n      date = _useState2[0],\n      setDate = _useState2[1];\n\n  var _useState3 = useState(mobileDevice ? 'listWeek' : 'dayGridMonth'),\n      _useState4 = _slicedToArray(_useState3, 2),\n      view = _useState4[0],\n      setView = _useState4[1];\n\n  var handleDateToday = function handleDateToday() {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  var handleViewChange = function handleViewChange(newView) {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  var handleDatePrev = function handleDatePrev() {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  var handleDateNext = function handleDateNext() {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  var handleAddClick = function handleAddClick() {\n    dispatch(openModal());\n  };\n\n  var handleRangeSelect = function handleRangeSelect(arg) {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      calendarApi.unselect();\n    }\n\n    dispatch(selectRange(arg.start, arg.end));\n  };\n\n  var handleEventSelect = function handleEventSelect(arg) {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  var handleEventResize = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n      var event;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event = _ref.event;\n              _context.prev = 1;\n              _context.next = 4;\n              return dispatch(updateEvent(event.id, {\n                allDay: event.allDay,\n                start: event.start,\n                end: event.end\n              }));\n\n            case 4:\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](1);\n              console.error(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 6]]);\n    }));\n\n    return function handleEventResize(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleEventDrop = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3) {\n      var event;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              event = _ref3.event;\n              _context2.prev = 1;\n              _context2.next = 4;\n              return dispatch(updateEvent(event.id, {\n                allDay: event.allDay,\n                start: event.start,\n                end: event.end\n              }));\n\n            case 4:\n              _context2.next = 9;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](1);\n              console.error(_context2.t0);\n\n            case 9:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 6]]);\n    }));\n\n    return function handleEventDrop(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleModalClose = function handleModalClose() {\n    dispatch(closeModal());\n  };\n\n  useEffect(function () {\n    dispatch(getEvents());\n  }, [dispatch]);\n  useEffect(function () {\n    var calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      var calendarApi = calendarEl.getApi();\n      var newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [mobileDevice]);\n  return /*#__PURE__*/React.createElement(Page, {\n    className: classes.root,\n    title: \"Calendar\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    maxWidth: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    onAddClick: handleAddClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Toolbar, {\n    date: date,\n    onDateNext: handleDateNext,\n    onDatePrev: handleDatePrev,\n    onDateToday: handleDateToday,\n    onViewChange: handleViewChange,\n    view: view,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.calendar,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FullCalendar, {\n    allDayMaintainDuration: true,\n    defaultDate: date,\n    defaultView: view,\n    droppable: true,\n    editable: true,\n    eventClick: handleEventSelect,\n    eventDrop: handleEventDrop,\n    eventLimit: true,\n    eventResizableFromStart: true,\n    eventResize: handleEventResize,\n    events: events,\n    header: false,\n    height: 800,\n    ref: calendarRef,\n    rerenderDelay: 10,\n    select: handleRangeSelect,\n    selectable: true,\n    weekends: true,\n    plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin, listPlugin, timelinePlugin],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Dialog, {\n    maxWidth: \"sm\",\n    fullWidth: true,\n    onClose: handleModalClose,\n    open: isModalOpen,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 9\n    }\n  }, isModalOpen && /*#__PURE__*/React.createElement(AddEditEventForm, {\n    event: selectedEvent,\n    range: selectedRange,\n    onAddComplete: handleModalClose,\n    onCancel: handleModalClose,\n    onDeleteComplete: handleModalClose,\n    onEditComplete: handleModalClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 13\n    }\n  }))));\n};\n\nexport default CalendarView;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/views/calendar/CalendarView/index.js"],"names":["React","useState","useRef","useEffect","moment","FullCalendar","dayGridPlugin","timeGridPlugin","interactionPlugin","listPlugin","timelinePlugin","Container","Dialog","Paper","useTheme","useMediaQuery","makeStyles","Page","useDispatch","useSelector","getEvents","updateEvent","selectEvent","selectRange","openModal","closeModal","Header","Toolbar","AddEditEventForm","selectedEventSelector","state","calendar","events","selectedEventId","find","_event","id","useStyles","theme","root","backgroundColor","palette","background","dark","minHeight","paddingTop","spacing","paddingBottom","marginTop","padding","default","borderColor","divider","typography","body2","secondary","main","color","contrastText","borderWidth","opacity","h6","body1","subtitle2","fontWeight","fontWeightMedium","text","subtitle1","CalendarView","classes","calendarRef","mobileDevice","breakpoints","down","dispatch","isModalOpen","selectedRange","selectedEvent","toDate","date","setDate","view","setView","handleDateToday","calendarEl","current","calendarApi","getApi","today","getDate","handleViewChange","newView","changeView","handleDatePrev","prev","handleDateNext","next","handleAddClick","handleRangeSelect","arg","unselect","start","end","handleEventSelect","event","handleEventResize","allDay","console","error","handleEventDrop","handleModalClose"],"mappings":"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","sourcesContent":["import '@fullcalendar/core/main.css';\nimport '@fullcalendar/daygrid/main.css';\nimport '@fullcalendar/timegrid/main.css';\nimport '@fullcalendar/list/main.css';\nimport React, {\n  useState,\n  useRef,\n  useEffect\n} from 'react';\nimport moment from 'moment';\nimport FullCalendar from '@fullcalendar/react';\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport listPlugin from '@fullcalendar/list';\nimport timelinePlugin from '@fullcalendar/timeline';\nimport {\n  Container,\n  Dialog,\n  Paper,\n  useTheme,\n  useMediaQuery,\n  makeStyles\n} from '@material-ui/core';\nimport Page from 'src/components/Page';\nimport { useDispatch, useSelector } from 'src/store';\nimport {\n  getEvents,\n  updateEvent,\n  selectEvent,\n  selectRange,\n  openModal,\n  closeModal\n} from 'src/slices/calendar';\nimport Header from './Header';\nimport Toolbar from './Toolbar';\nimport AddEditEventForm from './AddEditEventForm';\n\nconst selectedEventSelector = (state) => {\n  const { events, selectedEventId } = state.calendar;\n\n  if (selectedEventId) {\n    return events.find((_event) => _event.id === selectedEventId);\n  } else {\n    return null;\n  }\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.dark,\n    minHeight: '100%',\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3)\n  },\n  calendar: {\n    marginTop: theme.spacing(3),\n    padding: theme.spacing(2),\n    '& .fc-unthemed .fc-head': {\n      backgroundColor: theme.palette.background.dark\n    },\n    '& .fc-unthemed .fc-body': {\n      backgroundColor: theme.palette.background.default\n    },\n    '& .fc-unthemed .fc-row': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed .fc-axis': {\n      ...theme.typography.body2\n    },\n    '& .fc-unthemed .fc-divider': {\n      backgroundColor: theme.palette.background.dark,\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed th': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed td': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed td.fc-today': {\n      backgroundColor: theme.palette.background.dark\n    },\n    '& .fc-unthemed .fc-highlight': {\n      backgroundColor: theme.palette.background.dark\n    },\n    '& .fc-unthemed .fc-event': {\n      backgroundColor: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      borderWidth: 2,\n      opacity: 0.9,\n      '& .fc-time': {\n        ...theme.typography.h6,\n        color: 'inherit'\n      },\n      '& .fc-title': {\n        ...theme.typography.body1,\n        color: 'inherit'\n      }\n    },\n    '& .fc-unthemed .fc-day-top': {\n      ...theme.typography.body2\n    },\n    '& .fc-unthemed .fc-day-header': {\n      ...theme.typography.subtitle2,\n      fontWeight: theme.typography.fontWeightMedium,\n      color: theme.palette.text.secondary,\n      padding: theme.spacing(1),\n      backgroundColor: theme.palette.background.dark\n    },\n    '& .fc-unthemed .fc-list-view': {\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed .fc-list-empty': {\n      ...theme.typography.subtitle1\n    },\n    '& .fc-unthemed .fc-list-heading td': {\n      backgroundColor: theme.palette.background.dark,\n      borderColor: theme.palette.divider\n    },\n    '& .fc-unthemed .fc-list-heading-main': {\n      ...theme.typography.h6\n    },\n    '& .fc-unthemed .fc-list-heading-alt': {\n      ...theme.typography.h6\n    },\n    '& .fc-unthemed .fc-list-item:hover td': {\n      backgroundColor: theme.palette.background.dark,\n    },\n    '& .fc-unthemed .fc-list-item-title': {\n      ...theme.typography.body1\n    },\n    '& .fc-unthemed .fc-list-item-time': {\n      ...theme.typography.body2\n    }\n  }\n}));\n\nconst CalendarView = () => {\n  const classes = useStyles();\n  const calendarRef = useRef(null);\n  const theme = useTheme();\n  const mobileDevice = useMediaQuery(theme.breakpoints.down('sm'));\n  const dispatch = useDispatch();\n  const { events, isModalOpen, selectedRange } = useSelector((state) => state.calendar);\n  const selectedEvent = useSelector(selectedEventSelector);\n  const [date, setDate] = useState(moment().toDate());\n  const [view, setView] = useState(mobileDevice ? 'listWeek' : 'dayGridMonth');\n\n  const handleDateToday = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.today();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleViewChange = (newView) => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  };\n\n  const handleDatePrev = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.prev();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleDateNext = () => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.next();\n      setDate(calendarApi.getDate());\n    }\n  };\n\n  const handleAddClick = () => {\n    dispatch(openModal());\n  };\n\n  const handleRangeSelect = (arg) => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n\n      calendarApi.unselect();\n    }\n\n    dispatch(selectRange(arg.start, arg.end));\n  };\n\n  const handleEventSelect = (arg) => {\n    dispatch(selectEvent(arg.event.id));\n  };\n\n  const handleEventResize = async ({ event }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEventDrop = async ({ event }) => {\n    try {\n      await dispatch(updateEvent(event.id, {\n        allDay: event.allDay,\n        start: event.start,\n        end: event.end\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleModalClose = () => {\n    dispatch(closeModal());\n  };\n\n  useEffect(() => {\n    dispatch(getEvents());\n  }, [dispatch]);\n\n  useEffect(() => {\n    const calendarEl = calendarRef.current;\n\n    if (calendarEl) {\n      const calendarApi = calendarEl.getApi();\n      const newView = mobileDevice ? 'listWeek' : 'dayGridMonth';\n\n      calendarApi.changeView(newView);\n      setView(newView);\n    }\n  }, [mobileDevice]);\n\n  return (\n    <Page\n      className={classes.root}\n      title=\"Calendar\"\n    >\n      <Container maxWidth={false}>\n        <Header onAddClick={handleAddClick} />\n        <Toolbar\n          date={date}\n          onDateNext={handleDateNext}\n          onDatePrev={handleDatePrev}\n          onDateToday={handleDateToday}\n          onViewChange={handleViewChange}\n          view={view}\n        />\n        <Paper className={classes.calendar}>\n          <FullCalendar\n            allDayMaintainDuration\n            defaultDate={date}\n            defaultView={view}\n            droppable\n            editable\n            eventClick={handleEventSelect}\n            eventDrop={handleEventDrop}\n            eventLimit\n            eventResizableFromStart\n            eventResize={handleEventResize}\n            events={events}\n            header={false}\n            height={800}\n            ref={calendarRef}\n            rerenderDelay={10}\n            select={handleRangeSelect}\n            selectable\n            weekends\n            plugins={[\n              dayGridPlugin,\n              timeGridPlugin,\n              interactionPlugin,\n              listPlugin,\n              timelinePlugin\n            ]}\n          />\n        </Paper>\n        <Dialog\n          maxWidth=\"sm\"\n          fullWidth\n          onClose={handleModalClose}\n          open={isModalOpen}\n        >\n          {/* Dialog renders its body even if not open */}\n          {isModalOpen && (\n            <AddEditEventForm\n              event={selectedEvent}\n              range={selectedRange}\n              onAddComplete={handleModalClose}\n              onCancel={handleModalClose}\n              onDeleteComplete={handleModalClose}\n              onEditComplete={handleModalClose}\n            />\n          )}\n        </Dialog>\n      </Container>\n    </Page>\n  );\n};\n\nexport default CalendarView;\n"]},"metadata":{},"sourceType":"module"}