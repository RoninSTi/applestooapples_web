{"ast":null,"code":"import _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { createSlice } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport axios from 'src/utils/axios';\nvar initialState = {\n  events: [],\n  isModalOpen: false,\n  selectedEventId: null,\n  selectedRange: null\n};\nvar slice = createSlice({\n  name: 'calendar',\n  initialState: initialState,\n  reducers: {\n    getEvents: function getEvents(state, action) {\n      var events = action.payload.events;\n      state.events = events;\n    },\n    createEvent: function createEvent(state, action) {\n      var event = action.payload.event;\n      state.events = [].concat(_toConsumableArray(state.events), [event]);\n    },\n    selectEvent: function selectEvent(state, action) {\n      var _action$payload$event = action.payload.eventId,\n          eventId = _action$payload$event === void 0 ? null : _action$payload$event;\n      state.isModalOpen = true;\n      state.selectedEventId = eventId;\n    },\n    updateEvent: function updateEvent(state, action) {\n      var event = action.payload.event;\n      state.events = _.map(state.events, function (_event) {\n        if (_event.id === event.id) {\n          return event;\n        }\n\n        return _event;\n      });\n    },\n    deleteEvent: function deleteEvent(state, action) {\n      var eventId = action.payload.eventId;\n      state.events = _.reject(state.events, {\n        id: eventId\n      });\n    },\n    selectRange: function selectRange(state, action) {\n      var _action$payload = action.payload,\n          start = _action$payload.start,\n          end = _action$payload.end;\n      state.isModalOpen = true;\n      state.selectedRange = {\n        start: start,\n        end: end\n      };\n    },\n    openModal: function openModal(state) {\n      state.isModalOpen = true;\n    },\n    closeModal: function closeModal(state) {\n      state.isModalOpen = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    }\n  }\n});\nexport var reducer = slice.reducer;\nexport var getEvents = function getEvents() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get('/api/calendar/events');\n\n            case 2:\n              response = _context.sent;\n              dispatch(slice.actions.getEvents(response.data));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var createEvent = function createEvent(data) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.post('/api/calendar/events/new', data);\n\n            case 2:\n              response = _context2.sent;\n              dispatch(slice.actions.createEvent(response.data));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var selectEvent = function selectEvent(eventId) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch(slice.actions.selectEvent({\n                eventId: eventId\n              }));\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var updateEvent = function updateEvent(eventId, update) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return axios.post('/api/calendar/events/update', {\n                eventId: eventId,\n                update: update\n              });\n\n            case 2:\n              response = _context4.sent;\n              dispatch(slice.actions.updateEvent(response.data));\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var deleteEvent = function deleteEvent(eventId) {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return axios.post('/api/calendar/events/remove', {\n                eventId: eventId\n              });\n\n            case 2:\n              dispatch(slice.actions.deleteEvent({\n                eventId: eventId\n              }));\n\n            case 3:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var selectRange = function selectRange(start, end) {\n  return function (dispatch) {\n    dispatch(slice.actions.selectRange({\n      start: start.getTime(),\n      end: end.getTime()\n    }));\n  };\n};\nexport var openModal = function openModal() {\n  return function (dispatch) {\n    dispatch(slice.actions.openModal());\n  };\n};\nexport var closeModal = function closeModal() {\n  return function (dispatch) {\n    dispatch(slice.actions.closeModal());\n  };\n};\nexport default slice;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/slices/calendar.js"],"names":["createSlice","_","axios","initialState","events","isModalOpen","selectedEventId","selectedRange","slice","name","reducers","getEvents","state","action","payload","createEvent","event","selectEvent","eventId","updateEvent","map","_event","id","deleteEvent","reject","selectRange","start","end","openModal","closeModal","reducer","dispatch","get","response","actions","data","post","update","getTime"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport _ from 'lodash';\nimport axios from 'src/utils/axios';\n\nconst initialState = {\n  events: [],\n  isModalOpen: false,\n  selectedEventId: null,\n  selectedRange: null\n};\n\nconst slice = createSlice({\n  name: 'calendar',\n  initialState,\n  reducers: {\n    getEvents(state, action) {\n      const { events } = action.payload;\n\n      state.events = events;\n    },\n    createEvent(state, action) {\n      const { event } = action.payload;\n\n      state.events = [...state.events, event];\n    },\n    selectEvent(state, action) {\n      const { eventId = null } = action.payload;\n\n      state.isModalOpen = true;\n      state.selectedEventId = eventId;\n    },\n    updateEvent(state, action) {\n      const { event } = action.payload;\n\n      state.events = _.map(state.events, (_event) => {\n        if (_event.id === event.id) {\n          return event;\n        }\n\n        return _event;\n      });\n    },\n    deleteEvent(state, action) {\n      const { eventId } = action.payload;\n\n      state.events = _.reject(state.events, { id: eventId });\n    },\n    selectRange(state, action) {\n      const { start, end } = action.payload;\n\n      state.isModalOpen = true;\n      state.selectedRange = {\n        start,\n        end\n      };\n    },\n    openModal(state) {\n      state.isModalOpen = true;\n    },\n    closeModal(state) {\n      state.isModalOpen = false;\n      state.selectedEventId = null;\n      state.selectedRange = null;\n    }\n  }\n});\n\nexport const reducer = slice.reducer;\n\nexport const getEvents = () => async (dispatch) => {\n  const response = await axios.get('/api/calendar/events');\n\n  dispatch(slice.actions.getEvents(response.data));\n};\n\nexport const createEvent = (data) => async (dispatch) => {\n  const response = await axios.post('/api/calendar/events/new', data);\n\n  dispatch(slice.actions.createEvent(response.data));\n};\n\nexport const selectEvent = (eventId) => async (dispatch) => {\n  dispatch(slice.actions.selectEvent({ eventId }));\n};\n\nexport const updateEvent = (eventId, update) => async (dispatch) => {\n  const response = await axios.post('/api/calendar/events/update', {\n    eventId,\n    update\n  });\n\n  dispatch(slice.actions.updateEvent(response.data));\n};\n\nexport const deleteEvent = (eventId) => async (dispatch) => {\n  await axios.post('/api/calendar/events/remove', {\n    eventId\n  });\n\n  dispatch(slice.actions.deleteEvent({ eventId }));\n};\n\nexport const selectRange = (start, end) => (dispatch) => {\n  dispatch(slice.actions.selectRange({\n    start: start.getTime(),\n    end: end.getTime()\n  }));\n};\n\nexport const openModal = () => (dispatch) => {\n  dispatch(slice.actions.openModal());\n};\n\nexport const closeModal = () => (dispatch) => {\n  dispatch(slice.actions.closeModal());\n};\n\nexport default slice;\n"]},"metadata":{},"sourceType":"module"}