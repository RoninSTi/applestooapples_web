{"ast":null,"code":"import _extends from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/craigcronin/Development/applestooapples_web_template/src/views/customer/CustomerDetailsView/Details/Emails.js\";\n\nimport React, { useState, useCallback, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport { Box, Button, Card, CardContent, CardHeader, Divider, Table, TableBody, TableCell, TableRow, TextField, makeStyles } from '@material-ui/core';\nimport MaiIcon from '@material-ui/icons/MailOutline';\nimport axios from 'src/utils/axios';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nvar emailOptions = ['Resend last invoice', 'Send password reset', 'Send verification'];\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    cell: {\n      padding: theme.spacing(1)\n    }\n  };\n});\n\nvar Emails = function Emails(_ref) {\n  var className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"className\"]);\n\n  var classes = useStyles();\n  var isMountedRef = useIsMountedRef();\n\n  var _useState = useState(emailOptions[0]),\n      _useState2 = _slicedToArray(_useState, 2),\n      emailOption = _useState2[0],\n      setEmailOption = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      emails = _useState4[0],\n      setEmails = _useState4[1];\n\n  var getMails = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return axios.get('/api/customers/1/emails');\n\n          case 3:\n            response = _context.sent;\n\n            if (isMountedRef.current) {\n              setEmails(response.data.emails);\n            }\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  })), [isMountedRef]);\n  useEffect(function () {\n    getMails();\n  }, [getMails]);\n  return /*#__PURE__*/React.createElement(Card, _extends({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Send emails\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CardContent, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    name: \"option\",\n    onChange: function onChange(event) {\n      return setEmailOption(event.target.value);\n    },\n    select: true,\n    SelectProps: {\n      native: true\n    },\n    value: emailOption,\n    variant: \"outlined\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, emailOptions.map(function (option) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: option,\n      value: option,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, option);\n  })), /*#__PURE__*/React.createElement(Box, {\n    mt: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    startIcon: /*#__PURE__*/React.createElement(MaiIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 24\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, \"Send email\")), /*#__PURE__*/React.createElement(Box, {\n    mt: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TableBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, emails.map(function (email) {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: email.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.cell,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 19\n      }\n    }, moment(email.createdAt).format('DD/MM/YYYY | HH:MM')), /*#__PURE__*/React.createElement(TableCell, {\n      className: classes.cell,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, email.description));\n  }))))));\n};\n\nEmails.propTypes = {\n  className: PropTypes.string\n};\nexport default Emails;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/views/customer/CustomerDetailsView/Details/Emails.js"],"names":["React","useState","useCallback","useEffect","PropTypes","clsx","moment","Box","Button","Card","CardContent","CardHeader","Divider","Table","TableBody","TableCell","TableRow","TextField","makeStyles","MaiIcon","axios","useIsMountedRef","emailOptions","useStyles","theme","root","cell","padding","spacing","Emails","className","rest","classes","isMountedRef","emailOption","setEmailOption","emails","setEmails","getMails","get","response","current","data","console","error","event","target","value","native","map","option","email","id","createdAt","format","description","propTypes","string"],"mappings":"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","sourcesContent":["import React, {\n  useState,\n  useCallback,\n  useEffect\n} from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport {\n  Box,\n  Button,\n  Card,\n  CardContent,\n  CardHeader,\n  Divider,\n  Table,\n  TableBody,\n  TableCell,\n  TableRow,\n  TextField,\n  makeStyles\n} from '@material-ui/core';\nimport MaiIcon from '@material-ui/icons/MailOutline';\nimport axios from 'src/utils/axios';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\n\nconst emailOptions = [\n  'Resend last invoice',\n  'Send password reset',\n  'Send verification'\n];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  cell: {\n    padding: theme.spacing(1)\n  }\n}));\n\nconst Emails = ({ className, ...rest }) => {\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [emailOption, setEmailOption] = useState(emailOptions[0]);\n  const [emails, setEmails] = useState([]);\n\n  const getMails = useCallback(async () => {\n    try {\n      const response = await axios.get('/api/customers/1/emails');\n\n      if (isMountedRef.current) {\n        setEmails(response.data.emails);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getMails();\n  }, [getMails]);\n\n  return (\n    <Card\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <CardHeader title=\"Send emails\" />\n      <Divider />\n      <CardContent>\n        <TextField\n          fullWidth\n          name=\"option\"\n          onChange={(event) => setEmailOption(event.target.value)}\n          select\n          SelectProps={{ native: true }}\n          value={emailOption}\n          variant=\"outlined\"\n        >\n          {emailOptions.map((option) => (\n            <option\n              key={option}\n              value={option}\n            >\n              {option}\n            </option>\n          ))}\n        </TextField>\n        <Box mt={2}>\n          <Button\n            variant=\"contained\"\n            startIcon={<MaiIcon />}\n          >\n            Send email\n          </Button>\n        </Box>\n        <Box mt={2}>\n          <Table>\n            <TableBody>\n              {emails.map((email) => (\n                <TableRow key={email.id}>\n                  <TableCell className={classes.cell}>\n                    {moment(email.createdAt).format('DD/MM/YYYY | HH:MM')}\n                  </TableCell>\n                  <TableCell className={classes.cell}>\n                    {email.description}\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </Box>\n      </CardContent>\n    </Card>\n  );\n};\n\nEmails.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default Emails;\n"]},"metadata":{},"sourceType":"module"}