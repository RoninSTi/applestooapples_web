{"ast":null,"code":"import _extends from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/craigcronin/Development/applestooapples_web_template/src/views/reports/DashboardAlternativeView/CustomerActivity.js\";\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport { Avatar, Box, Card, CardHeader, Divider, Link, List, ListItem, ListItemAvatar, ListItemText, Typography, makeStyles } from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport getInitials from 'src/utils/getInitials';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport GenericMoreButton from 'src/components/GenericMoreButton';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    item: {\n      padding: theme.spacing(3),\n      flexGrow: 1,\n      '&:first-of-type': {\n        borderRight: \"1px solid \".concat(theme.palette.divider)\n      }\n    }\n  };\n});\n\nvar CustomerActivity = function CustomerActivity(_ref) {\n  var className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"className\"]);\n\n  var classes = useStyles();\n  var isMountedRef = useIsMountedRef();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      activities = _useState2[0],\n      setActivities = _useState2[1];\n\n  var getActivities = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var response;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return axios.get('/api/reports/customer-activity');\n\n          case 3:\n            response = _context.sent;\n\n            if (isMountedRef.current) {\n              setActivities(response.data.activities);\n            }\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 7]]);\n  })), [isMountedRef]);\n  useEffect(function () {\n    getActivities();\n  }, [getActivities]);\n  return /*#__PURE__*/React.createElement(Card, _extends({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(CardHeader, {\n    title: \"Customer Activity\",\n    action: /*#__PURE__*/React.createElement(GenericMoreButton, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.item,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    variant: \"h3\",\n    color: \"textPrimary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"15,245\"), /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    component: \"h4\",\n    gutterBottom: true,\n    variant: \"overline\",\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Registered\")), /*#__PURE__*/React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.item,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    variant: \"h3\",\n    color: \"textPrimary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 11\n    }\n  }, \"357\"), /*#__PURE__*/React.createElement(Typography, {\n    align: \"center\",\n    component: \"h4\",\n    gutterBottom: true,\n    variant: \"overline\",\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, \"Online\"))), /*#__PURE__*/React.createElement(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(List, {\n    disablePadding: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, activities.map(function (activity, i) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      divider: i < activities.length - 1,\n      key: activity.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      alt: \"Customer\",\n      component: RouterLink,\n      src: activity.customer.avatar,\n      to: \"#\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, getInitials(activity.customer.name))), /*#__PURE__*/React.createElement(ListItemText, {\n      disableTypography: true,\n      primary: /*#__PURE__*/React.createElement(Link, {\n        color: \"textPrimary\",\n        component: RouterLink,\n        to: \"#\",\n        underline: \"none\",\n        variant: \"h6\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }, activity.customer.name),\n      secondary: /*#__PURE__*/React.createElement(Typography, {\n        variant: \"body2\",\n        color: \"textSecondary\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 17\n        }\n      }, activity.description),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      color: \"textSecondary\",\n      noWrap: true,\n      variant: \"caption\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, moment(activity.createdAt).fromNow()));\n  })));\n};\n\nCustomerActivity.propTypes = {\n  className: PropTypes.string\n};\nexport default CustomerActivity;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/views/reports/DashboardAlternativeView/CustomerActivity.js"],"names":["React","useCallback","useEffect","useState","Link","RouterLink","clsx","moment","PropTypes","Avatar","Box","Card","CardHeader","Divider","List","ListItem","ListItemAvatar","ListItemText","Typography","makeStyles","axios","getInitials","useIsMountedRef","GenericMoreButton","useStyles","theme","root","item","padding","spacing","flexGrow","borderRight","palette","divider","CustomerActivity","className","rest","classes","isMountedRef","activities","setActivities","getActivities","get","response","current","data","console","error","map","activity","i","length","id","customer","avatar","name","description","createdAt","fromNow","propTypes","string"],"mappings":"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","sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useState\n} from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport clsx from 'clsx';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport {\n  Avatar,\n  Box,\n  Card,\n  CardHeader,\n  Divider,\n  Link,\n  List,\n  ListItem,\n  ListItemAvatar,\n  ListItemText,\n  Typography,\n  makeStyles\n} from '@material-ui/core';\nimport axios from 'src/utils/axios';\nimport getInitials from 'src/utils/getInitials';\nimport useIsMountedRef from 'src/hooks/useIsMountedRef';\nimport GenericMoreButton from 'src/components/GenericMoreButton';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  item: {\n    padding: theme.spacing(3),\n    flexGrow: 1,\n    '&:first-of-type': {\n      borderRight: `1px solid ${theme.palette.divider}`\n    }\n  }\n}));\n\nconst CustomerActivity = ({ className, ...rest }) => {\n  const classes = useStyles();\n  const isMountedRef = useIsMountedRef();\n  const [activities, setActivities] = useState([]);\n\n  const getActivities = useCallback(async () => {\n    try {\n      const response = await axios.get('/api/reports/customer-activity');\n\n      if (isMountedRef.current) {\n        setActivities(response.data.activities);\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }, [isMountedRef]);\n\n  useEffect(() => {\n    getActivities();\n  }, [getActivities]);\n\n  return (\n    <Card\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <CardHeader\n        title=\"Customer Activity\"\n        action={<GenericMoreButton />}\n      />\n      <Divider />\n      <Box display=\"flex\">\n        <div className={classes.item}>\n          <Typography\n            align=\"center\"\n            variant=\"h3\"\n            color=\"textPrimary\"\n          >\n            15,245\n          </Typography>\n          <Typography\n            align=\"center\"\n            component=\"h4\"\n            gutterBottom\n            variant=\"overline\"\n            color=\"textSecondary\"\n          >\n            Registered\n          </Typography>\n        </div>\n        <Divider />\n        <div className={classes.item}>\n          <Typography\n            align=\"center\"\n            variant=\"h3\"\n            color=\"textPrimary\"\n          >\n            357\n          </Typography>\n          <Typography\n            align=\"center\"\n            component=\"h4\"\n            gutterBottom\n            variant=\"overline\"\n            color=\"textSecondary\"\n          >\n            Online\n          </Typography>\n        </div>\n      </Box>\n      <Divider />\n      <List disablePadding>\n        {activities.map((activity, i) => (\n          <ListItem\n            divider={i < activities.length - 1}\n            key={activity.id}\n          >\n            <ListItemAvatar>\n              <Avatar\n                alt=\"Customer\"\n                component={RouterLink}\n                src={activity.customer.avatar}\n                to=\"#\"\n              >\n                {getInitials(activity.customer.name)}\n              </Avatar>\n            </ListItemAvatar>\n            <ListItemText\n              disableTypography\n              primary={(\n                <Link\n                  color=\"textPrimary\"\n                  component={RouterLink}\n                  to=\"#\"\n                  underline=\"none\"\n                  variant=\"h6\"\n                >\n                  {activity.customer.name}\n                </Link>\n              )}\n              secondary={(\n                <Typography\n                  variant=\"body2\"\n                  color=\"textSecondary\"\n                >\n                  {activity.description}\n                </Typography>\n              )}\n            />\n            <Typography\n              color=\"textSecondary\"\n              noWrap\n              variant=\"caption\"\n            >\n              {moment(activity.createdAt).fromNow()}\n            </Typography>\n          </ListItem>\n        ))}\n      </List>\n    </Card>\n  );\n}\n\nCustomerActivity.propTypes = {\n  className: PropTypes.string\n};\n\nexport default CustomerActivity;\n"]},"metadata":{},"sourceType":"module"}