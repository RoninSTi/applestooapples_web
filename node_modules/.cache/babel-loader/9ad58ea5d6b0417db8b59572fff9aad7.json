{"ast":null,"code":"import _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/craigcronin/Development/applestooapples_web_template/src/views/calendar/CalendarView/AddEditEventForm.js\";\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport { Box, Typography, TextField, Button, IconButton, Divider, FormControlLabel, FormHelperText, Switch, SvgIcon, makeStyles } from '@material-ui/core';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { Trash as TrashIcon } from 'react-feather';\nimport { useDispatch } from 'src/store';\nimport { createEvent, updateEvent, deleteEvent } from 'src/slices/calendar';\n\nvar getInitialValues = function getInitialValues(event, range) {\n  if (event) {\n    return _.merge({}, {\n      allDay: false,\n      color: '',\n      description: '',\n      end: moment().add(30, 'minutes').toDate(),\n      start: moment().toDate(),\n      title: '',\n      submit: null\n    }, event);\n  }\n\n  if (range) {\n    return _.merge({}, {\n      allDay: false,\n      color: '',\n      description: '',\n      end: new Date(range.end),\n      start: new Date(range.start),\n      title: '',\n      submit: null\n    }, event);\n  }\n\n  return {\n    allDay: false,\n    color: '',\n    description: '',\n    end: moment().add(30, 'minutes').toDate(),\n    start: moment().toDate(),\n    title: '',\n    submit: null\n  };\n};\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    confirmButton: {\n      marginLeft: theme.spacing(2)\n    }\n  };\n});\n\nvar AddEditEventForm = function AddEditEventForm(_ref) {\n  var event = _ref.event,\n      onAddComplete = _ref.onAddComplete,\n      onCancel = _ref.onCancel,\n      onDeleteComplete = _ref.onDeleteComplete,\n      onEditComplete = _ref.onEditComplete,\n      range = _ref.range;\n  var classes = useStyles();\n  var dispatch = useDispatch();\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var isCreating = !event;\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return dispatch(deleteEvent(event.id));\n\n            case 3:\n              onDeleteComplete();\n              _context.next = 9;\n              break;\n\n            case 6:\n              _context.prev = 6;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 6]]);\n    }));\n\n    return function handleDelete() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(Formik, {\n    initialValues: getInitialValues(event, range),\n    validationSchema: Yup.object().shape({\n      allDay: Yup.bool(),\n      description: Yup.string().max(5000),\n      end: Yup.date().when('start', function (start, schema) {\n        return start && schema.min(start, 'End date must be later than start date');\n      }),\n      start: Yup.date(),\n      title: Yup.string().max(255).required('Title is required')\n    }),\n    onSubmit: /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values, _ref3) {\n        var resetForm, setErrors, setStatus, setSubmitting, data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                resetForm = _ref3.resetForm, setErrors = _ref3.setErrors, setStatus = _ref3.setStatus, setSubmitting = _ref3.setSubmitting;\n                _context2.prev = 1;\n                data = {\n                  allDay: values.allDay,\n                  description: values.description,\n                  end: values.end,\n                  start: values.start,\n                  title: values.title\n                };\n\n                if (!event) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 6;\n                return dispatch(updateEvent(event.id, data));\n\n              case 6:\n                _context2.next = 10;\n                break;\n\n              case 8:\n                _context2.next = 10;\n                return dispatch(createEvent(data));\n\n              case 10:\n                resetForm();\n                setStatus({\n                  success: true\n                });\n                setSubmitting(false);\n                enqueueSnackbar('Calendar updated', {\n                  variant: 'success'\n                });\n\n                if (isCreating) {\n                  onAddComplete();\n                } else {\n                  onEditComplete();\n                }\n\n                _context2.next = 23;\n                break;\n\n              case 17:\n                _context2.prev = 17;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.error(_context2.t0);\n                setStatus({\n                  success: false\n                });\n                setErrors({\n                  submit: _context2.t0.message\n                });\n                setSubmitting(false);\n\n              case 23:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 17]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref4.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, function (_ref5) {\n    var errors = _ref5.errors,\n        handleBlur = _ref5.handleBlur,\n        handleChange = _ref5.handleChange,\n        handleSubmit = _ref5.handleSubmit,\n        isSubmitting = _ref5.isSubmitting,\n        setFieldTouched = _ref5.setFieldTouched,\n        setFieldValue = _ref5.setFieldValue,\n        touched = _ref5.touched,\n        values = _ref5.values;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      p: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      align: \"center\",\n      gutterBottom: true,\n      variant: \"h3\",\n      color: \"textPrimary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, isCreating ? 'Add Event' : 'Edit Event')), /*#__PURE__*/React.createElement(Box, {\n      p: 3,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      error: Boolean(touched.title && errors.title),\n      fullWidth: true,\n      helperText: touched.title && errors.title,\n      label: \"Title\",\n      name: \"title\",\n      onBlur: handleBlur,\n      onChange: handleChange,\n      value: values.title,\n      variant: \"outlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      mt: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      error: Boolean(touched.description && errors.description),\n      fullWidth: true,\n      helperText: touched.description && errors.description,\n      label: \"Description\",\n      name: \"description\",\n      onBlur: handleBlur,\n      onChange: handleChange,\n      value: values.description,\n      variant: \"outlined\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Box, {\n      mt: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      control: /*#__PURE__*/React.createElement(Switch, {\n        checked: values.allDay,\n        name: \"allDay\",\n        onChange: handleChange,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 19\n        }\n      }),\n      label: \"All day\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Box, {\n      mt: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DateTimePicker, {\n      fullWidth: true,\n      inputVariant: \"outlined\",\n      label: \"Start date\",\n      name: \"start\",\n      onClick: function onClick() {\n        return setFieldTouched('end');\n      },\n      onChange: function onChange(date) {\n        return setFieldValue('start', date);\n      },\n      value: values.start,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Box, {\n      mt: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DateTimePicker, {\n      fullWidth: true,\n      inputVariant: \"outlined\",\n      label: \"End date\",\n      name: \"end\",\n      onClick: function onClick() {\n        return setFieldTouched('end');\n      },\n      onChange: function onChange(date) {\n        return setFieldValue('end', date);\n      },\n      value: values.end,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    })), Boolean(touched.end && errors.end) && /*#__PURE__*/React.createElement(Box, {\n      mt: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(FormHelperText, {\n      error: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, errors.end))), /*#__PURE__*/React.createElement(Divider, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Box, {\n      p: 2,\n      display: \"flex\",\n      alignItems: \"center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 11\n      }\n    }, !isCreating && /*#__PURE__*/React.createElement(IconButton, {\n      onClick: function onClick() {\n        return handleDelete();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(SvgIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TrashIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(Box, {\n      flexGrow: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      onClick: onCancel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }\n    }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      type: \"submit\",\n      disabled: isSubmitting,\n      color: \"secondary\",\n      className: classes.confirmButton,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 13\n      }\n    }, \"Confirm\")));\n  });\n};\n\nAddEditEventForm.propTypes = {\n  event: PropTypes.object,\n  onAddComplete: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDeleteComplete: PropTypes.func,\n  onEditComplete: PropTypes.func,\n  range: PropTypes.object\n};\nAddEditEventForm.defaultProps = {\n  onAddComplete: function onAddComplete() {},\n  onCancel: function onCancel() {},\n  onDeleteComplete: function onDeleteComplete() {},\n  onEditComplete: function onEditComplete() {}\n};\nexport default AddEditEventForm;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/views/calendar/CalendarView/AddEditEventForm.js"],"names":["React","PropTypes","moment","_","Yup","Formik","useSnackbar","Box","Typography","TextField","Button","IconButton","Divider","FormControlLabel","FormHelperText","Switch","SvgIcon","makeStyles","DateTimePicker","Trash","TrashIcon","useDispatch","createEvent","updateEvent","deleteEvent","getInitialValues","event","range","merge","allDay","color","description","end","add","toDate","start","title","submit","Date","useStyles","theme","root","confirmButton","marginLeft","spacing","AddEditEventForm","onAddComplete","onCancel","onDeleteComplete","onEditComplete","classes","dispatch","enqueueSnackbar","isCreating","handleDelete","id","console","error","object","shape","bool","string","max","date","when","schema","min","required","values","resetForm","setErrors","setStatus","setSubmitting","data","success","variant","message","errors","handleBlur","handleChange","handleSubmit","isSubmitting","setFieldTouched","setFieldValue","touched","Boolean","propTypes","func","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport _ from 'lodash';\nimport * as Yup from 'yup';\nimport { Formik } from 'formik';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Typography,\n  TextField,\n  Button,\n  IconButton,\n  Divider,\n  FormControlLabel,\n  FormHelperText,\n  Switch,\n  SvgIcon,\n  makeStyles\n} from '@material-ui/core';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { Trash as TrashIcon } from 'react-feather';\nimport { useDispatch } from 'src/store';\nimport {\n  createEvent,\n  updateEvent,\n  deleteEvent\n} from 'src/slices/calendar';\n\nconst getInitialValues = (event, range) => {\n  if (event) {\n    return _.merge({}, {\n      allDay: false,\n      color: '',\n      description: '',\n      end: moment().add(30, 'minutes').toDate(),\n      start: moment().toDate(),\n      title: '',\n      submit: null\n    }, event);\n  }\n\n  if (range) {\n    return _.merge({}, {\n      allDay: false,\n      color: '',\n      description: '',\n      end: new Date(range.end),\n      start: new Date(range.start),\n      title: '',\n      submit: null\n    }, event);\n  }\n\n  return {\n    allDay: false,\n    color: '',\n    description: '',\n    end: moment().add(30, 'minutes').toDate(),\n    start: moment().toDate(),\n    title: '',\n    submit: null\n  };\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  confirmButton: {\n    marginLeft: theme.spacing(2)\n  }\n}));\n\nconst AddEditEventForm = ({\n  event,\n  onAddComplete,\n  onCancel,\n  onDeleteComplete,\n  onEditComplete,\n  range\n}) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const isCreating = !event;\n\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteEvent(event.id));\n      onDeleteComplete();\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  return (\n    <Formik\n      initialValues={getInitialValues(event, range)}\n      validationSchema={Yup.object().shape({\n        allDay: Yup.bool(),\n        description: Yup.string().max(5000),\n        end: Yup.date()\n          .when(\n            'start',\n            (start, schema) => (start && schema.min(start, 'End date must be later than start date'))\n          ),\n        start: Yup.date(),\n        title: Yup.string().max(255).required('Title is required')\n      })}\n      onSubmit={async (values, {\n        resetForm,\n        setErrors,\n        setStatus,\n        setSubmitting\n      }) => {\n        try {\n          const data = {\n            allDay: values.allDay,\n            description: values.description,\n            end: values.end,\n            start: values.start,\n            title: values.title\n          };\n\n          if (event) {\n            await dispatch(updateEvent(event.id, data));\n          } else {\n            await dispatch(createEvent(data));\n          }\n\n          resetForm();\n          setStatus({ success: true });\n          setSubmitting(false);\n          enqueueSnackbar('Calendar updated', {\n            variant: 'success'\n          });\n\n          if (isCreating) {\n            onAddComplete();\n          } else {\n            onEditComplete();\n          }\n        } catch (err) {\n          console.error(err);\n          setStatus({ success: false });\n          setErrors({ submit: err.message });\n          setSubmitting(false);\n        }\n      }}\n    >\n      {({\n        errors,\n        handleBlur,\n        handleChange,\n        handleSubmit,\n        isSubmitting,\n        setFieldTouched,\n        setFieldValue,\n        touched,\n        values\n      }) => (\n        <form onSubmit={handleSubmit}>\n          <Box p={3}>\n            <Typography\n              align=\"center\"\n              gutterBottom\n              variant=\"h3\"\n              color=\"textPrimary\"\n            >\n              {isCreating ? 'Add Event' : 'Edit Event'}\n            </Typography>\n          </Box>\n          <Box p={3}>\n            <TextField\n              error={Boolean(touched.title && errors.title)}\n              fullWidth\n              helperText={touched.title && errors.title}\n              label=\"Title\"\n              name=\"title\"\n              onBlur={handleBlur}\n              onChange={handleChange}\n              value={values.title}\n              variant=\"outlined\"\n            />\n            <Box mt={2}>\n              <TextField\n                error={Boolean(touched.description && errors.description)}\n                fullWidth\n                helperText={touched.description && errors.description}\n                label=\"Description\"\n                name=\"description\"\n                onBlur={handleBlur}\n                onChange={handleChange}\n                value={values.description}\n                variant=\"outlined\"\n              />\n            </Box>\n            <Box mt={2}>\n              <FormControlLabel\n                control={(\n                  <Switch\n                    checked={values.allDay}\n                    name=\"allDay\"\n                    onChange={handleChange}\n                  />\n                )}\n                label=\"All day\"\n              />\n            </Box>\n            <Box mt={2}>\n              <DateTimePicker\n                fullWidth\n                inputVariant=\"outlined\"\n                label=\"Start date\"\n                name=\"start\"\n                onClick={() => setFieldTouched('end')}\n                onChange={(date) => setFieldValue('start', date)}\n                value={values.start}\n              />\n            </Box>\n            <Box mt={2}>\n              <DateTimePicker\n                fullWidth\n                inputVariant=\"outlined\"\n                label=\"End date\"\n                name=\"end\"\n                onClick={() => setFieldTouched('end')}\n                onChange={(date) => setFieldValue('end', date)}\n                value={values.end}\n              />\n            </Box>\n            {Boolean(touched.end && errors.end) && (\n              <Box mt={2}>\n                <FormHelperText error>\n                  {errors.end}\n                </FormHelperText>\n              </Box>\n            )}\n          </Box>\n          <Divider />\n          <Box\n            p={2}\n            display=\"flex\"\n            alignItems=\"center\"\n          >\n            {!isCreating && (\n              <IconButton onClick={() => handleDelete()}>\n                <SvgIcon>\n                  <TrashIcon />\n                </SvgIcon>\n              </IconButton>\n            )}\n            <Box flexGrow={1} />\n            <Button onClick={onCancel}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"contained\"\n              type=\"submit\"\n              disabled={isSubmitting}\n              color=\"secondary\"\n              className={classes.confirmButton}\n            >\n              Confirm\n            </Button>\n          </Box>\n        </form>\n      )}\n    </Formik>\n  );\n};\n\nAddEditEventForm.propTypes = {\n  event: PropTypes.object,\n  onAddComplete: PropTypes.func,\n  onCancel: PropTypes.func,\n  onDeleteComplete: PropTypes.func,\n  onEditComplete: PropTypes.func,\n  range: PropTypes.object\n};\n\nAddEditEventForm.defaultProps = {\n  onAddComplete: () => { },\n  onCancel: () => { },\n  onDeleteComplete: () => { },\n  onEditComplete: () => { }\n};\n\nexport default AddEditEventForm;\n"]},"metadata":{},"sourceType":"module"}