{"ast":null,"code":"import _extends from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/craigcronin/Development/applestooapples_web_template/src/views/kanban/KanbanView/CardEditModal/Checklist.js\";\n\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport { Box, Button, LinearProgress, Typography, TextField, SvgIcon, makeStyles } from '@material-ui/core';\nimport { List as ListIcon } from 'react-feather';\nimport { useDispatch } from 'src/store';\nimport { updateChecklist, deleteChecklist } from 'src/slices/kanban';\nimport CheckItem from './CheckItem';\nimport CheckItemAdd from './CheckItemAdd';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    root: {},\n    listIcon: {\n      marginRight: theme.spacing(3)\n    }\n  };\n});\n\nvar Checklist = function Checklist(_ref) {\n  var card = _ref.card,\n      checklist = _ref.checklist,\n      className = _ref.className,\n      rest = _objectWithoutProperties(_ref, [\"card\", \"checklist\", \"className\"]);\n\n  var classes = useStyles();\n  var dispatch = useDispatch();\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _useState = useState(checklist.name),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      editingName = _useState4[0],\n      setEditingName = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      editingCheckItem = _useState6[0],\n      setEditingCheckItem = _useState6[1];\n\n  var handleNameEdit = function handleNameEdit() {\n    setEditingName(true);\n  };\n\n  var handleNameChange = function handleNameChange(event) {\n    event.persist();\n    setName(event.target.value);\n  };\n\n  var handleNameSave = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!(!name || name === checklist.name)) {\n                _context.next = 5;\n                break;\n              }\n\n              setEditingName(false);\n              setName(checklist.name);\n              return _context.abrupt(\"return\");\n\n            case 5:\n              setEditingName(false);\n              _context.next = 8;\n              return dispatch(updateChecklist(card.id, checklist.id, {\n                name: name\n              }));\n\n            case 8:\n              enqueueSnackbar('Checklist updated', {\n                variant: 'success'\n              });\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0);\n              enqueueSnackbar('Something went wrong', {\n                variant: 'error'\n              });\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 11]]);\n    }));\n\n    return function handleNameSave() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleNameCancel = function handleNameCancel() {\n    setEditingName(false);\n    setName(checklist.name);\n  };\n\n  var handleDelete = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return dispatch(deleteChecklist(card.id, checklist.id));\n\n            case 3:\n              enqueueSnackbar('Checklist deleted', {\n                variant: 'success'\n              });\n              _context2.next = 10;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](0);\n              console.error(_context2.t0);\n              enqueueSnackbar('Something went wrong', {\n                variant: 'error'\n              });\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 6]]);\n    }));\n\n    return function handleDelete() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleCheckItemEditInit = function handleCheckItemEditInit(checkItemId) {\n    setEditingCheckItem(checkItemId);\n  };\n\n  var handleCheckItemEditCancel = function handleCheckItemEditCancel() {\n    setEditingCheckItem(null);\n  };\n\n  var handleCheckItemEditComplete = function handleCheckItemEditComplete() {\n    setEditingCheckItem(null);\n  };\n\n  var totalCheckItems = checklist.checkItems.length;\n  var completedCheckItems = checklist.checkItems.filter(function (checkItem) {\n    return checkItem.state === 'complete';\n  }).length;\n  var completePercentage = totalCheckItems === 0 ? 100 : completedCheckItems / totalCheckItems * 100;\n  return /*#__PURE__*/React.createElement(\"div\", _extends({\n    className: clsx(classes.root, className)\n  }, rest, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SvgIcon, {\n    fontSize: \"small\",\n    color: \"action\",\n    className: classes.listIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  })), editingName ? /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    value: name,\n    fullWidth: true,\n    variant: \"outlined\",\n    onChange: handleNameChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    size: \"small\",\n    variant: \"contained\",\n    onClick: handleNameSave,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 15\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    onClick: handleNameCancel,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"Cancel\"))) : /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    flexGrow: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h4\",\n    color: \"textPrimary\",\n    onClick: handleNameEdit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, checklist.name), /*#__PURE__*/React.createElement(Box, {\n    flexGrow: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    onClick: handleDelete,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, \"Delete\"))), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    display: \"flex\",\n    alignItems: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"caption\",\n    color: \"textSecondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 9\n    }\n  }, Math.round(completePercentage), \"%\"), /*#__PURE__*/React.createElement(Box, {\n    ml: 2,\n    flexGrow: 1,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LinearProgress, {\n    variant: \"determinate\",\n    value: completePercentage,\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Box, {\n    mt: 3,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, checklist.checkItems.map(function (checkItem) {\n    return /*#__PURE__*/React.createElement(CheckItem, {\n      editing: editingCheckItem === checkItem.id,\n      checkItem: checkItem,\n      card: card,\n      checklist: checklist,\n      key: checkItem.id,\n      onEditCancel: handleCheckItemEditCancel,\n      onEditComplete: handleCheckItemEditComplete,\n      onEditInit: function onEditInit() {\n        return handleCheckItemEditInit(checkItem.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    });\n  })), /*#__PURE__*/React.createElement(Box, {\n    mt: 1,\n    ml: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CheckItemAdd, {\n    card: card,\n    checklist: checklist,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  })));\n};\n\nChecklist.propTypes = {\n  className: PropTypes.string,\n  card: PropTypes.object.isRequired,\n  checklist: PropTypes.object.isRequired\n};\nexport default Checklist;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/views/kanban/KanbanView/CardEditModal/Checklist.js"],"names":["React","useState","PropTypes","clsx","useSnackbar","Box","Button","LinearProgress","Typography","TextField","SvgIcon","makeStyles","List","ListIcon","useDispatch","updateChecklist","deleteChecklist","CheckItem","CheckItemAdd","useStyles","theme","root","listIcon","marginRight","spacing","Checklist","card","checklist","className","rest","classes","dispatch","enqueueSnackbar","name","setName","editingName","setEditingName","editingCheckItem","setEditingCheckItem","handleNameEdit","handleNameChange","event","persist","target","value","handleNameSave","id","variant","console","error","handleNameCancel","handleDelete","handleCheckItemEditInit","checkItemId","handleCheckItemEditCancel","handleCheckItemEditComplete","totalCheckItems","checkItems","length","completedCheckItems","filter","checkItem","state","completePercentage","Math","round","map","propTypes","string","object","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSnackbar } from 'notistack';\nimport {\n  Box,\n  Button,\n  LinearProgress,\n  Typography,\n  TextField,\n  SvgIcon,\n  makeStyles\n} from '@material-ui/core';\nimport { List as ListIcon } from 'react-feather';\nimport { useDispatch } from 'src/store';\nimport {\n  updateChecklist,\n  deleteChecklist\n} from 'src/slices/kanban';\nimport CheckItem from './CheckItem';\nimport CheckItemAdd from './CheckItemAdd';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {},\n  listIcon: {\n    marginRight: theme.spacing(3)\n  }\n}));\n\nconst Checklist = ({\n  card,\n  checklist,\n  className,\n  ...rest\n}) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const { enqueueSnackbar } = useSnackbar();\n  const [name, setName] = useState(checklist.name);\n  const [editingName, setEditingName] = useState(false);\n  const [editingCheckItem, setEditingCheckItem] = useState(null);\n\n  const handleNameEdit = () => {\n    setEditingName(true);\n  };\n\n  const handleNameChange = (event) => {\n    event.persist();\n    setName(event.target.value);\n  };\n\n  const handleNameSave = async () => {\n    try {\n      if (!name || name === checklist.name) {\n        setEditingName(false);\n        setName(checklist.name);\n        return;\n      }\n\n      setEditingName(false);\n      await dispatch(updateChecklist(card.id, checklist.id, { name }));\n      enqueueSnackbar('Checklist updated', {\n        variant: 'success'\n      });\n    } catch (err) {\n      console.error(err);\n      enqueueSnackbar('Something went wrong', {\n        variant: 'error'\n      });\n    }\n  };\n\n  const handleNameCancel = () => {\n    setEditingName(false);\n    setName(checklist.name);\n  };\n\n  const handleDelete = async () => {\n    try {\n      await dispatch(deleteChecklist(card.id, checklist.id));\n      enqueueSnackbar('Checklist deleted', {\n        variant: 'success'\n      });\n    } catch (err) {\n      console.error(err);\n      enqueueSnackbar('Something went wrong', {\n        variant: 'error'\n      });\n    }\n  };\n\n  const handleCheckItemEditInit = (checkItemId) => {\n    setEditingCheckItem(checkItemId);\n  };\n\n  const handleCheckItemEditCancel = () => {\n    setEditingCheckItem(null);\n  };\n\n  const handleCheckItemEditComplete = () => {\n    setEditingCheckItem(null);\n  };\n\n  const totalCheckItems = checklist.checkItems.length;\n  const completedCheckItems = (checklist.checkItems.filter((checkItem) => checkItem.state === 'complete')).length;\n  const completePercentage = totalCheckItems === 0\n    ? 100\n    : (completedCheckItems / totalCheckItems) * 100;\n\n  return (\n    <div\n      className={clsx(classes.root, className)}\n      {...rest}\n    >\n      <Box\n        display=\"flex\"\n      >\n        <SvgIcon\n          fontSize=\"small\"\n          color=\"action\"\n          className={classes.listIcon}\n        >\n          <ListIcon />\n        </SvgIcon>\n        {editingName ? (\n          <Box flexGrow={1}>\n            <TextField\n              value={name}\n              fullWidth\n              variant=\"outlined\"\n              onChange={handleNameChange}\n            />\n            <Box mt={1}>\n              <Button\n                color=\"primary\"\n                size=\"small\"\n                variant=\"contained\"\n                onClick={handleNameSave}\n              >\n                Save\n              </Button>\n              <Button\n                size=\"small\"\n                onClick={handleNameCancel}\n              >\n                Cancel\n              </Button>\n            </Box>\n          </Box>\n        ) : (\n          <Box\n            display=\"flex\"\n            alignItems=\"center\"\n            flexGrow={1}\n          >\n            <Typography\n              variant=\"h4\"\n              color=\"textPrimary\"\n              onClick={handleNameEdit}\n            >\n              {checklist.name}\n            </Typography>\n            <Box flexGrow={1} />\n            <Button\n              size=\"small\"\n              onClick={handleDelete}\n            >\n              Delete\n            </Button>\n          </Box>\n        )}\n      </Box>\n      <Box\n        mt={1}\n        display=\"flex\"\n        alignItems=\"center\"\n      >\n        <Typography\n          variant=\"caption\"\n          color=\"textSecondary\"\n        >\n          {Math.round(completePercentage)}\n          %\n        </Typography>\n        <Box\n          ml={2}\n          flexGrow={1}\n        >\n          <LinearProgress\n            variant=\"determinate\"\n            value={completePercentage}\n            color=\"secondary\"\n          />\n        </Box>\n      </Box>\n      <Box mt={3}>\n        {checklist.checkItems.map((checkItem) => (\n          <CheckItem\n            editing={editingCheckItem === checkItem.id}\n            checkItem={checkItem}\n            card={card}\n            checklist={checklist}\n            key={checkItem.id}\n            onEditCancel={handleCheckItemEditCancel}\n            onEditComplete={handleCheckItemEditComplete}\n            onEditInit={() => handleCheckItemEditInit(checkItem.id)}\n          />\n        ))}\n      </Box>\n      <Box\n        mt={1}\n        ml={6}\n      >\n        <CheckItemAdd\n          card={card}\n          checklist={checklist}\n        />\n      </Box>\n    </div>\n  );\n};\n\nChecklist.propTypes = {\n  className: PropTypes.string,\n  card: PropTypes.object.isRequired,\n  checklist: PropTypes.object.isRequired\n};\n\nexport default Checklist;\n"]},"metadata":{},"sourceType":"module"}