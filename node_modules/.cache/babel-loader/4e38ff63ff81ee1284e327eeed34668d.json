{"ast":null,"code":"import _regeneratorRuntime from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/craigcronin/Development/applestooapples_web_template/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { createSlice } from '@reduxjs/toolkit';\nimport axios from 'src/utils/axios';\nimport objFromArray from 'src/utils/objFromArray';\nvar initialState = {\n  mails: {\n    byId: {},\n    allIds: []\n  },\n  labels: [],\n  isSidebarOpen: false,\n  isComposeOpen: false\n};\nvar slice = createSlice({\n  name: 'mail',\n  initialState: initialState,\n  reducers: {\n    getLabels: function getLabels(state, action) {\n      var labels = action.payload.labels;\n      state.labels = labels;\n    },\n    getMails: function getMails(state, action) {\n      var mails = action.payload.mails;\n      state.mails.byId = objFromArray(mails);\n      state.mails.allIds = Object.keys(state.mails.byId);\n    },\n    getMail: function getMail(state, action) {\n      var mail = action.payload.mail;\n      state.mails.byId[mail.id] = mail;\n\n      if (!state.mails.allIds.includes(mail.id)) {\n        state.mails.allIds.push(mail.id);\n      }\n    },\n    openSidebar: function openSidebar(state) {\n      state.isSidebarOpen = true;\n    },\n    closeSidebar: function closeSidebar(state) {\n      state.isSidebarOpen = false;\n    },\n    openCompose: function openCompose(state) {\n      state.isComposeOpen = true;\n    },\n    closeCompose: function closeCompose(state) {\n      state.isComposeOpen = false;\n    }\n  }\n});\nexport var reducer = slice.reducer;\nexport var getLabels = function getLabels() {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.get('/api/mail/labels');\n\n            case 2:\n              response = _context.sent;\n              dispatch(slice.actions.getLabels(response.data));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var getMails = function getMails(params) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get('/api/mail/mails', {\n                params: params\n              });\n\n            case 2:\n              response = _context2.sent;\n              dispatch(slice.actions.getMails(response.data));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var getMail = function getMail(mailId) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return axios.get('/api/mail/mail', {\n                params: {\n                  mailId: mailId\n                }\n              });\n\n            case 2:\n              response = _context3.sent;\n              dispatch(slice.actions.getMail(response.data));\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var openSidebar = function openSidebar() {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              dispatch(slice.actions.openSidebar());\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var closeSidebar = function closeSidebar() {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              dispatch(slice.actions.closeSidebar());\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x5) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var openCompose = function openCompose() {\n  return /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              dispatch(slice.actions.openCompose());\n\n            case 1:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\nexport var closeCompose = function closeCompose() {\n  return /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              dispatch(slice.actions.closeCompose());\n\n            case 1:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function (_x7) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n};\nexport default slice;","map":{"version":3,"sources":["/Users/craigcronin/Development/applestooapples_web_template/src/slices/mail.js"],"names":["createSlice","axios","objFromArray","initialState","mails","byId","allIds","labels","isSidebarOpen","isComposeOpen","slice","name","reducers","getLabels","state","action","payload","getMails","Object","keys","getMail","mail","id","includes","push","openSidebar","closeSidebar","openCompose","closeCompose","reducer","dispatch","get","response","actions","data","params","mailId"],"mappings":"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","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\nimport axios from 'src/utils/axios';\nimport objFromArray from 'src/utils/objFromArray';\n\nconst initialState = {\n  mails: {\n    byId: {},\n    allIds: []\n  },\n  labels: [],\n  isSidebarOpen: false,\n  isComposeOpen: false\n};\n\nconst slice = createSlice({\n  name: 'mail',\n  initialState,\n  reducers: {\n    getLabels(state, action) {\n      const { labels } = action.payload;\n\n      state.labels = labels;\n    },\n    getMails(state, action) {\n      const { mails } = action.payload;\n\n      state.mails.byId = objFromArray(mails);\n      state.mails.allIds = Object.keys(state.mails.byId);\n    },\n    getMail(state, action) {\n      const { mail } = action.payload;\n\n      state.mails.byId[mail.id] = mail;\n\n      if (!state.mails.allIds.includes(mail.id)) {\n        state.mails.allIds.push(mail.id);\n      }\n    },\n    openSidebar(state) {\n      state.isSidebarOpen = true;\n    },\n    closeSidebar(state) {\n      state.isSidebarOpen = false;\n    },\n    openCompose(state) {\n      state.isComposeOpen = true;\n    },\n    closeCompose(state) {\n      state.isComposeOpen = false;\n    }\n  }\n});\n\nexport const reducer = slice.reducer;\n\nexport const getLabels = () => async (dispatch) => {\n  const response = await axios.get('/api/mail/labels');\n\n  dispatch(slice.actions.getLabels(response.data));\n};\n\nexport const getMails = (params) => async (dispatch) => {\n  const response = await axios.get('/api/mail/mails', {\n    params\n  });\n\n  dispatch(slice.actions.getMails(response.data));\n};\n\nexport const getMail = (mailId) => async (dispatch) => {\n  const response = await axios.get('/api/mail/mail', {\n    params: {\n      mailId\n    }\n  });\n\n  dispatch(slice.actions.getMail(response.data));\n};\n\nexport const openSidebar = () => async (dispatch) => {\n  dispatch(slice.actions.openSidebar());\n};\n\nexport const closeSidebar = () => async (dispatch) => {\n  dispatch(slice.actions.closeSidebar());\n};\n\nexport const openCompose = () => async (dispatch) => {\n  dispatch(slice.actions.openCompose());\n};\n\nexport const closeCompose = () => async (dispatch) => {\n  dispatch(slice.actions.closeCompose());\n};\n\nexport default slice;\n"]},"metadata":{},"sourceType":"module"}